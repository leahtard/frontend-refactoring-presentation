<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Frontend Refactoring</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/league.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background="lib/images/building-repair.jpg">
					<h1>Frontend Refactoring</h1>
					<p>
						<small style="line-height:32px;">by Leah Wagner&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/leahamwagner">@leahamwagner</a> <br> from The Jibe&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/thejibe">@thejibe</a></small>
					</p>
					<aside class="notes">
						- Welcome, thanks for coming out.
					</aside>
				</section>

				<section>
					<h2>Hello there! I'm Leah</h2>
					<small style="line-height:32px;">Leah Wagner&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/leahamwagner">@leahamwagner</a> <br> from The Jibe&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/thejibe">@thejibe</a></small>
					<p>I <strong>♥</strong> talking about...</p>
					<p style="font-size:0.7em;">Frontend development, Drupal, modular SASS/CSS &amp; components, base styles, calc(), JS <em>(only because I need your help keeping up)</em>, Jekyll, craft beer, red wine and rock &amp; roll.</p>
					<aside class="notes">
						- Intro Leah
						- Intro The Jibe
						- I am a casual presenter. Please, ask questions throughout.
						- I usually like to finish up early. We can talk about these things.
						- But we are actually here to talk about...
					</aside>
				</section>

				<section>
					<h1>Frontend Refactoring</h1>
					<h3 class="fragment">So, here is how the story goes:</h3>
					<ul>
						<li class="fragment">You built a website in 2011...</li>
						<li class="fragment">It was on a tight timeline...</li>
						<li class="fragment">With last minute changes...</li>
						<li class="fragment">There has been ongoing work since then...</li>
						<li class="fragment">By several developers...</li>
					</ul>
					<aside class="notes">
						- Taking old code and making it new.
						- Usually with a particular goal in mind
					</aside>
				</section>

				<section data-transition="fade">
					<h2>Updating is beginning to feel like...</h2>
				</section>

				<section data-background="lib/images/code-13.gif" data-transition="fade">
					<h2>Updating is beginning to feel like...</h2>
					<aside class="notes">
						- This guy in a captian hat is you... and this is your website exploding around you.
						- Has anyone ever felt like this guy?
						- I was recently this guy. Constantly fixing one thing and breaking two others.
						- Something had to be done.
					</aside>
				</section>

				<section data-background="lib/images/lego.gif" data-transition="fade">
					<h2>How did we arrive at refactoring?</h2>
					<aside class="notes">
						- So, there are probably other reasons to start a refactoring project
						- But this was ours
						- This presentation will go through a real refactoring project we recently completed
					</aside>
				</section>

				<section>
					<h2>How did we arrive at refactoring?</h2>
					<ul>
						<li class="fragment">The Catalyst</li>
						<li class="fragment">The Code Audit</li>
						<li class="fragment">The Constraints</li>
						<li class="fragment">The Goal</li>
						<li class="fragment">The Improvements</li>
						<li class="fragment">The Results</li>
				  </ul>
				  <aside class="notes">
				  	- So I will be talking about an actual project with real examples here - simplified
				  	- we will walk though
				  </aside>
				</section>

				<section data-transition="fade">
					<h1>Here is what we did...</h1>
				</section>
				<section data-background="lib/images/tgs-header.png" data-transition="fade">
          <aside class="notes">
						- Our client is the Luxury Auction House
						- Drum up interest in your for property, throw a big party and auction it off.
						- My 900 sq ft condo would not qualify...
					</aside>
				</section>

				<section>
					<section>
						<h1>The Catalyst</h1>
					</section>
					<section>
						<h2>The Catalyst</h2>
						<ul>
							<li class="fragment">We found a bug in the mobile navigation</li>
							<li class="fragment">This was not the first navigation bug</li>
							<li class="fragment">Our inclination was to add code to fix the issue</li>
							<li class="fragment">Creating an over complicated code base</li>
							<li class="fragment">It was time for a fresh take!</li>
				    </ul>
					<aside class="notes">
						- Captain friend illustrated - we were finding bugs
						- In particular, The navigation.
						- The site had a fixed navigation. This carried over to the mobile. Fine until phone into a landscape orientation.
						- Add code to fix issue. over complicating the code base and making it continually difficult to maintain.
					</aside>
					</section>
				</section>

				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h1>The Code Audit</h1>
					</section>
					<section>
						<h2>The Code Audit</h2>
						<ul>
							<li class="fragment">Get a better understanding of what the component was trying to achieve.</li>
							<li class="fragment">Many factors that will determine how long this will take.</li>
							<li class="fragment">This let's us better understand the business objectives, or constraints, the original cade was trying to achieve.</li>
				    </ul>
					  <aside class="notes">
							- The The Code Audit stage helps you better understand the needs the original code was attempting to fulfill
							- Factors: documentation, was it another developer, was it you and you have a terrible memory,
							- I wasn't a part of the original dev here. But I could identify patterns that would give me clues. IE8 image.
				  	</aside>
					</section>
				</section>

				<section>
					<section data-transition="fade">
						<h1>The Constraints</h1>
						<aside class="notes">
							- The thing I most want to convey here is you don't suck.
							- Here we will review some of the items that were discovered during our audit
				  	</aside>
					</section>
					<section data-transition="fade">
						<h2>The Constraints</h2>
						<p><strong>THEN:</strong> We only had 2x retina screens.</p>
						<p>&nbsp;<br>&nbsp;<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> We only had 2x retina screens.</p>
						<p><strong>NOW:</strong> Today we also have 3x and 4x so our 2x images weren’t looking their best on those devices.<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> IE8 traffic was significant.</p>
						<p>&nbsp;<br>&nbsp;<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> IE8 traffic was significant.</p>
						<p><strong>NOW:</strong> Today's traffic is predominantly iOS. With IE8 now being less important, we can optimize our CSS, JS and animations techniques.</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> Being a luxury brand, design was the highest priority.</p>
						<p>&nbsp;<br>&nbsp;<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> Being a luxury brand, design was the highest priority.</p>
						<p><strong>NOW:</strong> Esthetics remain important, but today, we are better at considering performance implications for these decisions.<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> We typically remain agile when developing a new site.</p>
						<p>&nbsp;<br>&nbsp;<br>&nbsp;</p>
					</section>
					<section data-transition="fade">
						<h2>The constraints</h2>
						<p><strong>THEN:</strong> We typically remain agile when developing a new site.</p>
						<p><strong>NOW:</strong> Today, working with a relatively stable build, we now have an improved understanding of the code base and an opportunity to refine our work.</p>
					</section>
				</section>

				<section>
					<section>
						<h1>The goal</h1>
					</section>
					<section>
						<h2>The goal</h2>
						<p><strong>Stable, predictable and easy to update code</strong> that removed the fragile feeling we were currently experiencing.</p>
						<p><strong>Simplification and optimization</strong> that would give us not only greater confidence but also increase our productivity and more reliable outcomes.</p>
						<aside class="notes">
							- On to the exciting stuff.
							- Tangible improvements
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h1>The improvements</h1>
					</section>
					<section>
						<h2>Retina images > SVG</h2>
						<img data-src="lib/images/tgs-nav.png" style="width:100%;height:auto;border:none;">
						<aside class="notes">
							- The logo had a retina option
						</aside>
					</section>
					<section>
						<h2>Retina images > SVG</h2>
						<p class="fragment"><strong>THEN:</strong> We only had 2x retina screens and we used media queries to apply 2x images.</p>
						<p class="fragment"><strong>CHANGE:</strong> With recent advancements, we would now require 3x and 4x images as well.</p>
            <p class="fragment"><strong>NOW:</strong> Instead of managing 4 assets (1x, 2x, 3x and 4x), we refactored to use a vector based SVG. We still have a PNG fallback for IE8 and older Androids and we use Modernizr.js to apply an .svg class to our html element when it is supported.</li>
						</ul>
					</section>
          <section data-markdown>
						<script type="text/template">
							## Retina images > SVG

							**NOW:** Refactored code

							```
							li a.main-menu--link-logo {

							  width: 213px;
							  height: 112px;
							  background: transparent url('../images/menu/logo.png') no-repeat center center;

							  html.svg & {
							    background-image: url('../images/menu/logo.svg');
							  }

							}
							```
						</script>
					</section>
					<section>
						<h2>Sitewide > Component breakpoints</h2>
						<img data-src="lib/images/tgs-nav.png" style="width:100%;height:auto;border:none;">
						<aside class="notes">
						- Componentization:
						- Great talks yesterday on a componentized workflow.
						- I did a talk last year on ModularCSS
					  </aside>
					</section>
					<section>
						<h2>Sitewide > Component breakpoints</h2>
						<p class="fragment"><strong>THEN:</strong> We implemented the navigation to fit with breakpoints we had defined for the page layout: 0px, 480px and 768px.</p>
						<p class="fragment"><strong>CHANGE:</strong> This led us to adjusting font sizes in our menu to fit within these layout breakpoints. Not how we should be make font size decisions.</p>
						<p class="fragment"><strong>NOW:</strong> We defined custom breakpoints specifically for the navigation component. We serve the ideal font size for legibility and, when the layout no longer accommodates this font size, we simply change it.</p>
					</section>
					<section>
						<h2>Sitewide > Component breakpoints</h2>
						<small style="margin-bottom:0;">Mobile: 0px &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tablet: 748px</small>
						<img data-src="lib/images/tgs-nav-mob-tab.png" style="width:100%;height:auto;border:none;margin-top:0;">
					  <small style="margin-bottom:0;">Desktop: 948px </small>
						<img data-src="lib/images/tgs-nav.png" style="width:100%;height:auto;border:none;margin-top:0;">
					</section>
					<section>
						<h2>CSS inheritance &amp; smarter overrides</h2>
						<small style="margin-bottom:0;">Primary display</small>
						<img data-src="lib/images/tgs-nav.png" style="width:100%;height:auto;border:none;margin-top:0;">
						<small style="margin-bottom:0;">Override for light backgrounds</small>
						<img data-src="lib/images/tgs-nav-dark.png" style="width:100%;height:auto;border:none;margin-top:0;">
					</section>
          <section data-markdown>
						<script type="text/template">
							## CSS inheritance & smarter overrides

							**THEN:** Styles were being implemented in two separate areas of the code base and this caused repetition.

							```
							// Primary display                    // Override for light backgrounds
							#main-menu ul.menu li a {             html.dark-nav #main-menu ul.menu li a {
							  color: #FFF                           color: #445a7c;
							  border-bottom: solid 1px #FFF;        border-bottom: solid 1px #445a7c;
							  padding-bottom: 12px;                 padding-bottom: 12px;

							  &:hover,                              &:hover,
							  &.active {                            &.active {
							    border-bottom: solid 2px #FFF;        border-bottom: solid 2px #445a7c;
							    padding-bottom: 11px;                 padding-bottom: 11px;
							  }                                     }

							}                                     }
							```
						</script>
					</section>
					<section>
						<h2>CSS inheritance &amp; smarter overrides</h2>
						<p class="fragment"><strong>CHANGE:</strong> As we started to refactor the code used in for the primary display, the code for the override was not considered.</p>
						<p class="fragment"><strong>NOW:</strong> Recognizing the difference between two was colour, it became evident our code could be optimized.</p>
					</section>
					<section data-markdown>
						<script type="text/template">
							## CSS inheritance & smarter overrides

							**NOW:** We only override the elements we have to.

							```
							// Primary display                    // Override for light backgrounds
							#main-menu ul.menu li a {             html.dark-nav #main-menu ul.menu li a {
							  color: #FFF                           color: #445a7c;
							  border-bottom: solid 1px #FFF;        border-color: #445a7c;
							  padding-bottom: 12px;

							  &:hover,                              &:hover,
							  &.active {                            &.active {
							    border-bottom-width: 2px;             border-color: #445a7c;
							    padding-bottom: 11px;
							  }                                     }

							}                                     }
							```
						</script>
					</section>
					<section>
						<h2>JS > CSS animation</h2>
						<img data-src="lib/images/tgs-nav-mob.png" style="width:100%;height:auto;border:none;">
					</section>
					<section>
						<h2>JS > CSS animation</h2>
						<p class="fragment"><strong>THEN:</strong> We used JS SlideToggle to power the hide/show functionality in our mobile navigation.</p>
						<p class="fragment"><strong>CHANGE:</strong> With CSS transitions/animations fully supported in modern browsers, it was time to transition away from JS and provide a graceful downgrade for older browsers.</p>
            <p class="fragment"><strong>NOW:</strong> We are still lean on JS to add/remove an 'is-visible' class but the transition has been moved to CSS.</li>
					</section>
					<section data-markdown>
						<script type="text/template">
							## JS > CSS animation

							**NOW:** Refactored code

							```
							#mobile-menu {

							  width: 100%;
							  height: 0px;
							  // Bourbon mixin
							  @include transition(height 0.3s);

							  &.is-visible {
							    height: 75px;
							  }

							}
							```
						</script>
					</section>
				</section>

				<section>
					<section>
						<h1>The Results</h1>
						<aside class="notes">
						- But wait, how was the landscape mobile bug solved?
						- We went through all that...
						- Well, we remove it. No fix nav on mobile.
						- Part of Refactoring is removing functionality
					  </aside>
					</section>
					<section>
						<h2>The Results</h2>
						<p class="fragment">As a result of our changes, we were able to make our JavaScript more concise and rely on CSS to do more.</p>
						<p class="fragment"><strong>We were able to cut:</strong></p>
						<ul class="fragment">
						<li>over 100 lines of JS</li>
						<li>over 300 lines of CSS <em>(even after moving the animation logic over to CSS)</em></li>
					  </ul>
					</section>
				</section>

				<section data-background="lib/images/building-repair.jpg">
					<h1>Frontend Refactoring</h1>
					<p>
						<small style="line-height:32px;">by Leah Wagner&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/leahamwagner">@leahamwagner</a> <br> from The Jibe&nbsp;&nbsp;//&nbsp;&nbsp;<a href="http://twitter.com/thejibe">@thejibe</a></small>
					</p>
					<aside class="notes">
						- Welcome, thanks for coming out.
					</aside>
				</section>

			</div>
			<footer style="position:absolute;bottom:0;background:#FFF;z-index:100;width:100%;font-size:0.5em;border-top:solid 1px #4D4D4F"><img style="margin-left:10px;" src="lib/images/thejibe.jpg"/><span style="float:right;line-height:50px;color:#4D4D4F;margin-right:10px;">Frontend Refactoring&nbsp;&nbsp;//&nbsp;&nbsp;@leahamwagner</span></footer>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
